<!DOCTYPE html>
<html lang='ko'>
<head>
<meta charset='UTF-8'>
<title>강가 Scene 1~3</title>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<style>
* {margin: 0; padding: 0; box-sizing: border-box;}
html, body {width: 100vw; height: 100vh; font-family: 'Press Start 2P', monospace; overflow: hidden;}
.scene {display: none; width: 100vw; height: 100vh; position: relative;}
#scene1 {background-color: black; color: white; display: flex; flex-direction: column; align-items: flex-start; padding: 20px; font-size: 17px; white-space: pre-line;}
#prompt {position: absolute; top: 10px; left: 50%; transform: translateX(-50%); color: white; font-size: 14px; z-index: 10;}
#fadeout {position: fixed; width: 100%; height: 100%; top: 0; left: 0; background-color: black; animation: fadeToWhite 3s forwards; z-index: 20; display: none;}
@keyframes fadeToWhite {0% {background-color: black;} 100% {background-color: white;}}
#scene2, #scene3 {background-color: white;}
.scene2-img, .scene3-img {position: absolute; width: 100%; height: 100%; object-fit: cover; z-index: 0; display: none;}
#scene2-start {font-size: 17px; color: black; text-align: center; width: 100%; margin-top: 60px; white-space: pre-line;}
#dialogue-box, #scene3-dialogue {position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); width: 90%; background-color: black; color: white; padding: 30px; font-size: 19px; white-space: pre-line; text-align: left; border: 2px solid white; display: none;}
#choices {display: none; width: 100vw; height: 100vh; position: relative; background-color: white;}
.choice-half {width: 100%; height: 50%; display: flex; justify-content: center; align-items: center; font-size: 50px; color: black; text-align: center;}
#divider {height: 2px; width: 100%; background-color: black; position: absolute; top: 50%; z-index: 5;}
</style>
<link href='https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap' rel='stylesheet'>
</head>
<body onclick='handleClick(event)'>
<div id='scene1' class='scene' style='display: block;'>
<div id='prompt'>&lt;진행하려면 화면 터치&gt;</div>
<div id='scene1-text'></div>
</div>
<div id='fadeout'></div>
<div id='scene2' class='scene'>
<img id='scene2-img1' class='scene2-img' src='scene2_bird_mobile.png'>
<img id='scene2-img2' class='scene2-img' src='scene2_flying_bird.png'>
<div id='scene2-start'>새 한 무리가 강물 위에서 헤엄친다\n우리는 고향을 등지고 메마른 땅 위에 서 있다</div>
<div id='dialogue-box'></div>
</div>
<div id='choices'>
<div class='choice-half' onclick='choose(1)' style='position: absolute; top: 0;'>1. 하늘을 바라본다</div>
<div id='divider'></div>
<div class='choice-half' onclick='choose(2)' style='position: absolute; bottom: 0;'>2. ......집에 가야겠어.</div>
</div>
<div id='scene3' class='scene'>
<img id='scene3-bg' class='scene3-img'>
<div id='scene3-dialogue'></div>
</div>
<script>
const scene1Lines = ["햇빛이 유리상자를 따갑게 두들긴다","그 온도가 마음에 들지 않아 천천히 눈을 뜬다","......물을 보러 가자.","......","물냄새.","목소리.","누군가 나에게 말을 건넨다","저기 물 위에서 일렁이는 것이 보인다","......","내게 다가오고 있어."];
const scene2Lines = [
{ text: "우리는 바다에 터 잡은 조상을\n뒤로 하고 육지로 상경했지", bg: 1 },
{ text: "결국 물이 그리워 향수병이 생겼어\n아마 영원히 낫지 않을 거야" },
{ text: "병에 시달리는 삶이 애처롭기도 하고\n한 편의 우화 연극 같기도 하고\n우리는 관객이며 동시에 배우인데\n무대에 막이 내릴 기미는\n보이지가 않네" },
{ text: "새와 눈이 마주친다", bg: 2 },
{ text: "비웃는 표정으로 그가 하늘을 날아간다" },
{ text: "도시의 아스팔트 흙바닥을\n아무리 오래 밟아도\n근본이 변할 수는 없더라" },
{ text: "그래서 여기로 오는 거지\n기쁠 때도 슬플 때도\n귀성길에 오르는 거야\n향수병을 달래기 위해……" },
{ text: "우리는 하늘을 날며 보았어\n너희가 쌓아 올린 육지의 연장선을\n참 끝도 없이 높더라!\n새로운 고향을 찾으려는\n그 노력이 재밌더라" }
];
const scene3Option1 = ["새삼스럽게도 나는 하나의 사실을 깨달았다","나는 매달려있다, 삼각기둥 하늘에서 뻗어 나온 일곱 가지 줄에 의해서","내 눈길은 언제나 물을 향했지만","나는 땅에서조차 스스로 발을 딛고 있지 않았다", "--", "부탁이야", "이 줄을 끊어줘", "--", "새가 비웃는다", "너는 스스로 할 수 있는 것이 아무것도 없구나"];
let s1 = 0, s2 = 0, s3 = 0, in2 = false, in3 = false;
function handleClick(e) {
if (!in2) {
  const t = document.getElementById('scene1-text');
  if (s1 < scene1Lines.length) t.innerHTML += scene1Lines[s1++] + "\n";
  else {
    document.getElementById('prompt').style.display = 'none';
    document.getElementById('fadeout').style.display = 'block';
    setTimeout(() => {
      document.getElementById('scene1').style.display = 'none';
      document.getElementById('fadeout').style.display = 'none';
      document.getElementById('scene2').style.display = 'block';
      in2 = true;
    }, 3000);
  }
} else if (!in3) {
  const start = document.getElementById('scene2-start');
  const box = document.getElementById('dialogue-box');
  if (s2 === 0) { start.style.display = 'none'; box.style.display = 'block'; }
  if (s2 < scene2Lines.length) {
    box.innerHTML = scene2Lines[s2].text.replaceAll("\\n", "\n");
    document.getElementById('scene2-img1').style.display = (scene2Lines[s2].bg === 1) ? 'block' : 'none';
    document.getElementById('scene2-img2').style.display = (scene2Lines[s2].bg === 2) ? 'block' : 'none';
    s2++;
  } else {
    document.getElementById('scene2').style.display = 'none';
    document.getElementById('choices').style.display = 'block';
    in3 = true;
  }
}
}
function choose(n) {
  document.getElementById('choices').style.display = 'none';
  document.getElementById('scene3').style.display = 'block';
  const bg = document.getElementById('scene3-bg');
  const box = document.getElementById('scene3-dialogue');
  box.style.display = 'block';
  box.innerHTML = '';
  if (n === 1) {
    bg.src = 'sun_halo.webp'; bg.style.display = 'block';
    box.innerHTML = scene3Option1.slice(0,4).join('\n');
    s3 = 4;
  } else {
    bg.src = 'subway.png'; bg.style.display = 'block';
    box.innerHTML = '그래 오늘도 한강 공원은 갖가지 이유로 사람들이 북적이고 나는 이제 가야해 들개 우리같은 지하철에 몸을 맡기러, 새로운 고향으로 집 아닌 집으로 가야 하니까';
  }
}
</script>
</body>
</html>