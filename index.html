<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>강가</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      width: 100vw;
      height: 100vh;
      font-family: 'Press Start 2P', monospace;
      overflow: hidden;
    }
    .scene {
      display: none;
      width: 100%;
      height: 100%;
      position: relative;
    }
    #scene1 {
      background-color: black;
      color: white;
      font-size: 17px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      white-space: pre-line;
    }
    #prompt {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-size: 14px;
    }
    #fadeout {
      position: fixed;
      width: 100%;
      height: 100%;
      background: black;
      z-index: 20;
      animation: fadeToWhite 3s forwards;
      display: none;
    }
    @keyframes fadeToWhite {
      0% { background-color: black; }
      100% { background-color: white; }
    }
  </style>
</head>
<body>
  <div id="scene1" class="scene" style="display:block;">
    <div id="prompt">&lt;진행하려면 화면 터치&gt;</div>
    <div id="scene1-text"></div>
  </div>
  <div id="fadeout"></div>

  <script>
    const scene1Lines = [
      "햇빛이 유리상자를 따갑게 두들긴다",
      "그 온도가 마음에 들지 않아 천천히 눈을 뜬다",
      "......물을 보러 가자.",
      "......",
      "물냄새.",
      "목소리.",
      "누군가 나에게 말을 건넨다",
      "저기 물 위에서 일렁이는 것이 보인다",
      "......",
      "내게 다가오고 있어."
    ];

    let scene1Index = 0;
    const scene1TextDiv = document.getElementById("scene1-text");
    const fadeout = document.getElementById("fadeout");

    function nextScene1Line() {
      if (scene1Index < scene1Lines.length) {
        scene1TextDiv.innerHTML += scene1Lines[scene1Index] + "\n";
        scene1Index++;
      } else {
        fadeout.style.display = "block";
        setTimeout(() => {
          // Placeholder: Scene2로 넘어가는 로직이 여기에 삽입될 예정
          document.getElementById("scene1").style.display = "none";
document.body.style.backgroundColor = "white";
document.getElementById("scene2").style.display = "block";
document.body.onclick = nextScene2Line;
        }, 3000);
      }
    }

    document.addEventListener("click", () => {
      nextScene1Line();
    });
  
    const scene2Lines = [
      { text: "우리는 바다에 터 잡은 조상을\n뒤로 하고 육지로 상경했지", bg: 1 },
      { text: "결국 물이 그리워 향수병이 생겼어\n아마 영원히 낫지 않을 거야" },
      { text: "병에 시달리는 삶이 애처롭기도 하고\n한 편의 우화 연극 같기도 하고\n우리는 관객이며 동시에 배우인데\n무대에 막이 내릴 기미는\n보이지가 않네" },
      { text: "새와 눈이 마주친다", bg: 2 },
      { text: "비웃는 표정으로 그가 하늘을 날아간다" },
      { text: "도시의 아스팔트 흙바닥을\n아무리 오래 밟아도\n근본이 변할 수는 없더라" },
      { text: "그래서 여기로 오는 거지\n기쁠 때도 슬플 때도\n귀성길에 오르는 거야\n향수병을 달래기 위해……" },
      { text: "우리는 하늘을 날며 보았어\n너희가 쌓아 올린 육지의 연장선을\n참 끝도 없이 높더라!\n새로운 고향을 찾으려는\n그 노력이 재밌더라" }
    ];
    let scene2Index = 0;
    const scene2Start = document.getElementById("scene2-start");
    const dialogueBox = document.getElementById("dialogue-box");
    const img1 = document.getElementById("scene2-img1");
    const img2 = document.getElementById("scene2-img2");

    function nextScene2Line() {
      if (scene2Index === 0) {
        scene2Start.style.display = "none";
        dialogueBox.style.display = "block";
      }
      if (scene2Index < scene2Lines.length) {
        const line = scene2Lines[scene2Index];
        dialogueBox.innerHTML = line.text;
        if (line.bg === 1) {
          img1.style.display = "block";
          img2.style.display = "none";
        } else if (line.bg === 2) {
          img1.style.display = "none";
          img2.style.display = "block";
        }
        scene2Index++;
      } else {
        // Scene 3 연결 준비
        document.getElementById("scene2").style.display = "none";
document.getElementById("scene3-choices").style.display = "block";
      }
    }


    const scene3TextsOption1 = [
      "새삼스럽게도 나는 하나의 사실을 깨달았다",
      "나는 매달려있다, 삼각기둥 하늘에서 뻗어 나온 일곱 가지 줄에 의해서",
      "내 눈길은 언제나 물을 향했지만",
      "나는 땅에서조차 스스로 발을 딛고 있지 않았다",
      "부탁이야",
      "이 줄을 끊어줘",
      "새가 비웃는다",
      "너는 스스로 할 수 있는 것이 아무것도 없구나"
    ];
    let scene3Index = 0;
    function chooseScene3(choice) {
      document.getElementById("scene3-choices").style.display = "none";
      document.getElementById("scene3").style.display = "block";
      const bg = document.getElementById("scene3-bg");
      const box = document.getElementById("scene3-dialogue");
      box.style.display = "block";
      if (choice === 1) {
        bg.src = "sun_halo.webp";
        bg.style.display = "block";
        box.innerHTML = scene3TextsOption1.slice(0, 4).join("\n");
        scene3Index = 4;
        document.body.onclick = () => {
          if (scene3Index === 4) {
            box.innerHTML = scene3TextsOption1.slice(4, 6).join("\n");
            scene3Index = 6;
          } else if (scene3Index === 6) {
            bg.style.display = "none";
            box.innerHTML = scene3TextsOption1.slice(6).join("\n");
            document.body.onclick = () => {
              document.getElementById("scene3").style.display = "none";
              document.getElementById("scene4").style.display = "block";
            };
          }
        };
      } else {
        bg.src = "subway.png";
        bg.style.display = "block";
        box.innerHTML = "그래 오늘도 한강 공원은 갖가지 이유로 사람들이 북적이고 나는 이제 가야해 들개 우리같은 지하철에 몸을 맡기러, 새로운 고향으로 집 아닌 집으로 가야 하니까";
        setTimeout(() => {
          document.getElementById("scene3").style.display = "none";
          document.getElementById("scene4").style.display = "block";
        }, 4000);
      }
    }


    function viewOriginal() {
      document.getElementById("scene4").style.display = "none";
      document.getElementById("original-img").style.display = "block";
    }

    function closeWindow() {
      window.open('', '_self', ''); 
      window.close();
    }

</script>

  <div id="scene2" class="scene">
    <img id="scene2-img1" class="bg-img" src="scene2_bird_mobile.png" style="display: none;">
    <img id="scene2-img2" class="bg-img" src="scene2_flying_bird.png" style="display: none;">
    <div id="scene2-start" style="font-size: 17px; color: black; text-align: center; margin-top: 60px; white-space: pre-line;">
      새 한 무리가 강물 위에서 헤엄친다\n우리는 고향을 등지고 메마른 땅 위에 서 있다
    </div>
    <div id="dialogue-box" style="position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
      width: 90%; background-color: black; color: white; padding: 30px; font-size: 19px;
      white-space: pre-line; text-align: left; border: 2px solid white; display: none;">
    </div>
  </div>


  <div id="scene3-choices" class="scene" style="background-color: white; display: none;">
    <div style="position: absolute; top: 0; height: 50%; width: 100%; display: flex; align-items: center; justify-content: center; font-size: 50px; color: black;" onclick="chooseScene3(1)">1. 하늘을 바라본다</div>
    <div style="position: absolute; top: 50%; height: 2px; width: 100%; background-color: black;"></div>
    <div style="position: absolute; bottom: 0; height: 50%; width: 100%; display: flex; align-items: center; justify-content: center; font-size: 50px; color: black;" onclick="chooseScene3(2)">2. ......집에 가야겠어.</div>
  </div>
  <div id="scene3" class="scene" style="background-color: white;">
    <img id="scene3-bg" style="position: absolute; width: 100%; height: 100%; object-fit: cover; display: none;" />
    <div id="scene3-dialogue" style="position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
      width: 90%; background-color: black; color: white; padding: 30px; font-size: 18px;
      white-space: pre-line; text-align: left; border: 2px solid white; display: none;"></div>
  </div>


  <div id="scene4" class="scene" style="background-color: black; display: none;">
    <div style="position: absolute; top: 0; height: 50%; width: 100%;
      display: flex; justify-content: center; align-items: center;
      font-size: 42px; color: white;" onclick="viewOriginal()">
      원본 시를 보시겠습니까?
    </div>
    <div style="position: absolute; top: 50%; height: 2px; width: 100%; background-color: white;"></div>
    <div style="position: absolute; bottom: 0; height: 50%; width: 100%;
      display: flex; justify-content: center; align-items: center;
      font-size: 42px; color: white;" onclick="closeWindow()">
      현실로 돌아가기
    </div>
  </div>
  <img id="original-img" src="original.jpg" style="display: none; width: 100%; height: 100%; object-fit: contain; background-color: black;">

</body>
</html>
